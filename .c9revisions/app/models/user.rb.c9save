{"ts":1367806501068,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"class User < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :token_authenticatable, :confirmable,\n  # :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  # Setup accessible (or protected) attributes for your model\n  attr_accessible :group, :is_admin, :key, :name, :group_id, :email, :password, :password_confirmation, :remember_me\n\n  has_many :messages, :class_name => 'Message'\n  belongs_to :group\n\n  validates :key, :uniqueness => true\n  validates :name, :presence => true\nend\n"]],"start1":0,"start2":0,"length1":0,"length2":620}]],"length":620}
{"contributors":[],"silentsave":false,"ts":1367858169651,"patch":[[{"diffs":[[0,"idatable"],[1,", \n         :omniauthable, :omniauth_providers => [:facebook]"],[0,"\n\n  # Se"]],"start1":283,"start2":283,"length1":16,"length2":77},{"diffs":[[0,"ember_me"],[1,", :provider, :uid"],[0,"\n\n  has_"]],"start1":524,"start2":524,"length1":16,"length2":33}]],"length":698,"saved":false}
{"ts":1367858596447,"patch":[[{"diffs":[[0,"=> true\n"],[1,"  \n  def self.find_for_facebook_oauth(auth, signed_in_resource=nil)\n    user = User.where(:provider => auth.provider, :uid => auth.uid).first\n    unless user\n      user = User.create(name:auth.extra.raw_info.name,\n                          provider:auth.provider,\n                          uid:auth.uid,\n                          email:auth.info.email,\n                          password:Devise.friendly_token[0,20]\n                          )\n    end\n  user\nend\n"],[0,"end\n"]],"start1":686,"start2":686,"length1":12,"length2":475}]],"length":1161,"saved":false}
{"ts":1367858610254,"patch":[[{"diffs":[[0,"end\n"],[1,"  "],[0,"  user\n"],[1,"  "],[0,"end\n"]],"start1":1142,"start2":1142,"length1":15,"length2":19}]],"length":1165,"saved":false}
{"ts":1367858748750,"patch":[[{"diffs":[[0,"r\n  end\n"],[1,"  \n  def self.new_with_session(params, session)\n    super.tap do |user|\n      if data = session[\"devise.facebook_data\"] && session[\"devise.facebook_data\"][\"extra\"][\"raw_info\"]\n        user.email = data[\"email\"] if user.email.blank?\n      end\n    end\n  end\n"],[0,"end\n"]],"start1":1153,"start2":1153,"length1":12,"length2":268}]],"length":1421,"saved":false}
{"ts":1367858778197,"patch":[[{"diffs":[[0,"er\n  end\n  \n"],[1,"  #In case the user already exists before signup\n"],[0,"  def self.n"]],"start1":1152,"start2":1152,"length1":24,"length2":73}]],"length":1470,"saved":false}
{"contributors":[],"silentsave":false,"ts":1367872779966,"patch":[[{"diffs":[[0,"up\n\n"],[-1,"  validates :key, :uniqueness => true\n"],[0,"  va"]],"start1":615,"start2":615,"length1":46,"length2":8},{"diffs":[[0,"        "],[-1," "],[0,"provider"]],"start1":887,"start2":887,"length1":17,"length2":16},{"diffs":[[0,"ovider,\n"],[-1," "],[0,"        "]],"start1":911,"start2":911,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1," "],[0,"email:au"]],"start1":975,"start2":975,"length1":17,"length2":16},{"diffs":[[0,".email,\n"],[-1," "],[0,"        "]],"start1":998,"start2":998,"length1":17,"length2":16},{"diffs":[[0,"    "],[-1," "],[0,")\n"],[1,"  "],[0,"    "]],"start1":1089,"start2":1089,"length1":11,"length2":12}]],"length":1429,"saved":false}
{"ts":1367872788888,"patch":[[{"diffs":[[0,"      )\n    "],[-1,"  "],[0,"end\n    user"]],"start1":1087,"start2":1087,"length1":26,"length2":24}]],"length":1427,"saved":false}
{"ts":1367873359004,"patch":[[{"diffs":[[0,"en[0,20]"],[1,","],[0,"\n       "]],"start1":1059,"start2":1059,"length1":16,"length2":17}]],"length":1428,"saved":false}
